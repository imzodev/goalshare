# InternacionalizaciÃ³n (i18n) en GoalShare

## ğŸ“‹ DescripciÃ³n General

GoalShare utiliza `next-intl` para proporcionar soporte completo de internacionalizaciÃ³n con espaÃ±ol (ES) e inglÃ©s (EN). La implementaciÃ³n estÃ¡ basada en cookies, sin prefijos de URL, lo que permite una experiencia de usuario fluida.

## ğŸŒ Idiomas Soportados

- **EspaÃ±ol (es)** - Idioma predeterminado
- **InglÃ©s (en)**

## ğŸ“ Estructura de Archivos

```
i18n/
â”œâ”€â”€ config.ts              # ConfiguraciÃ³n de idiomas soportados
â”œâ”€â”€ messages/
â”‚   â”œâ”€â”€ es.json           # Traducciones en espaÃ±ol (~430 lÃ­neas)
â”‚   â””â”€â”€ en.json           # Traducciones en inglÃ©s (~430 lÃ­neas)
â”œâ”€â”€ request.ts            # ConfiguraciÃ³n de next-intl
â””â”€â”€ types.ts              # Tipos TypeScript para type-safety

utils/
â””â”€â”€ i18n-helpers.ts       # Funciones helper para traducciones dinÃ¡micas

app/
â”œâ”€â”€ layout.tsx            # ConfiguraciÃ³n global de i18n
â””â”€â”€ actions/
    â””â”€â”€ set-locale.ts     # Server action para cambiar idioma
```

## ğŸ¯ Namespaces Organizados

Las traducciones estÃ¡n organizadas en namespaces lÃ³gicos:

### `app`

InformaciÃ³n general de la aplicaciÃ³n

- `name`, `title`, `description`, `skipToContent`

### `common`

Elementos reutilizables en toda la app

- `actions`: save, cancel, delete, edit, create, etc.
- `states`: loading, error, success, empty, etc.
- `time`: justNow, minutesAgo, hoursAgo, etc.

### `auth`

Sistema de autenticaciÃ³n completo

- `loginPage`: Formulario de inicio de sesiÃ³n
- `signupPage`: Formulario de registro
- `forgotPassword`: RecuperaciÃ³n de contraseÃ±a
- `updatePassword`: ActualizaciÃ³n de contraseÃ±a
- `oauth`: Botones de OAuth
- `errors`: Mensajes de error de autenticaciÃ³n

### `landing`

PÃ¡gina de aterrizaje

- `hero`: SecciÃ³n hero
- `features`: CaracterÃ­sticas del producto
- `testimonials`: Testimonios de usuarios
- `pricing`: Planes de precios
- `finalCta`: Call-to-action final
- `footer`: Footer del sitio

### `dashboard`

Dashboard principal

- `header`: Encabezado con saludos dinÃ¡micos
- `sidebar`: NavegaciÃ³n lateral
- `stats`: Tarjetas de estadÃ­sticas
- `quickActions`: Acciones rÃ¡pidas
- `goalsSection`: SecciÃ³n de metas
- `communitiesSection`: SecciÃ³n de comunidades
- `mobileNav`: NavegaciÃ³n mÃ³vil

### `goals`

GestiÃ³n de metas

- `list`: Lista de metas
- `create`: Crear meta
- `edit`: Editar meta
- `delete`: Eliminar meta
- `types`: Tipos de meta (metric, milestone, checkin, manual)
- `typeDescriptions`: Descripciones de tipos
- `status`: Estados (pending, completed)
- `labels`: Etiquetas diversas

### `communities`

GestiÃ³n de comunidades

- `explore`: Explorar comunidades
- `profile`: Perfil de comunidad
- `myComm`: Mis comunidades
- `tabs`: PestaÃ±as

### `achievements`

Sistema de logros

- `title`, `earned`, `locked`, `progress`, etc.

### `errors`

Mensajes de error globales

- `generic`, `notFound`, `unauthorized`, `serverError`, etc.

### `validation`

Mensajes de validaciÃ³n de formularios

- `required`, `minLength`, `maxLength`, `invalidEmail`, etc.

### `theme`

Selector de tema

- `toggle`, `light`, `dark`, `system`

### `language`

Selector de idioma

- `label`, `es`, `en`

### `userMenu`

MenÃº de usuario

- `profile`, `settings`, `logout`

## ğŸ’» Uso en Componentes

### Server Components

```tsx
import { getTranslations } from "next-intl/server";

export default async function MyPage() {
  const t = await getTranslations("landing.hero");

  return (
    <div>
      <h1>{t("title")}</h1>
      <p>{t("subtitle")}</p>
    </div>
  );
}
```

### Client Components

```tsx
"use client";

import { useTranslations } from "next-intl";

export function MyComponent() {
  const t = useTranslations("dashboard.stats");

  return (
    <div>
      <h2>{t("activeGoals")}</h2>
      <p>{t("goalsDescription")}</p>
    </div>
  );
}
```

### InterpolaciÃ³n de Variables

```tsx
// En el archivo de traducciones:
// "multipleDays": "{count} dÃ­as restantes"

const t = useTranslations("goals.labels");
const daysLeft = 5;

<p>{t("multipleDays", { count: daysLeft })}</p>;
// Resultado: "5 dÃ­as restantes"
```

## ğŸ”§ Funciones Helper

Para traducciones dinÃ¡micas de constantes, usa las funciones helper:

```tsx
import { getGoalTypeKey, getGoalStatusKey } from "@/utils/i18n-helpers";
import { useTranslations } from "next-intl";

function GoalCard({ goal }) {
  const t = useTranslations();

  // Traduce el tipo de meta dinÃ¡micamente
  const typeKey = getGoalTypeKey(goal.type);
  const typeLabel = t(typeKey);

  // Traduce el estado dinÃ¡micamente
  const statusKey = getGoalStatusKey(goal.status);
  const statusLabel = t(statusKey);

  return (
    <div>
      <p>Tipo: {typeLabel}</p>
      <p>Estado: {statusLabel}</p>
    </div>
  );
}
```

## ğŸŒ Cambiar Idioma

El usuario puede cambiar el idioma usando el componente `LanguageSwitcher` en el header. El idioma se guarda en una cookie que persiste por 1 aÃ±o.

```tsx
import { LanguageSwitcher } from "@/components/language-switcher";

<LanguageSwitcher />;
```

Internamente, usa la server action `setLocaleCookie`:

```tsx
import { setLocaleCookie } from "@/app/actions/set-locale";

await setLocaleCookie("en"); // Cambia a inglÃ©s
await setLocaleCookie("es"); // Cambia a espaÃ±ol
```

## ğŸ”’ Type Safety

TypeScript proporciona autocompletado y validaciÃ³n de claves de traducciÃ³n:

```tsx
// âœ… Correcto - TypeScript sugiere las claves disponibles
t("hero.title");

// âŒ Error - TypeScript detecta la clave invÃ¡lida
t("hero.invalidKey");
```

Esto se logra mediante el archivo `i18n/types.ts` que extiende la interfaz `IntlMessages`.

## ğŸ“ Agregar Nuevas Traducciones

1. **Agrega la clave en ambos archivos de idioma:**

```json
// i18n/messages/es.json
{
  "myNamespace": {
    "myKey": "Mi texto en espaÃ±ol"
  }
}

// i18n/messages/en.json
{
  "myNamespace": {
    "myKey": "My text in English"
  }
}
```

2. **Usa la traducciÃ³n en tu componente:**

```tsx
const t = useTranslations("myNamespace");
<p>{t("myKey")}</p>;
```

## ğŸŒ Agregar Nuevo Idioma

1. **Actualiza la configuraciÃ³n:**

```ts
// i18n/config.ts
export const SUPPORTED_LOCALES = ["es", "en", "fr"] as const; // Agrega "fr"
```

2. **Crea el archivo de mensajes:**

```bash
cp i18n/messages/en.json i18n/messages/fr.json
```

3. **Traduce el contenido del archivo `fr.json`**

4. **Actualiza las traducciones del selector de idioma:**

```json
// En es.json y en.json
{
  "language": {
    "label": "Idioma",
    "es": "EspaÃ±ol",
    "en": "InglÃ©s",
    "fr": "FrancÃ©s" // Nuevo
  }
}
```

## âœ… Mejores PrÃ¡cticas

1. **Usa namespaces descriptivos** - Agrupa traducciones relacionadas
2. **MantÃ©n consistencia** - Usa los mismos tÃ©rminos en toda la app
3. **Evita hardcoded strings** - Todo texto visible debe estar traducido
4. **Usa interpolaciÃ³n** - Para textos con variables dinÃ¡micas
5. **Aprovecha type-safety** - TypeScript te ayudarÃ¡ a evitar errores
6. **Documenta contexto** - Si una traducciÃ³n es ambigua, agrega comentarios

## ğŸ› Troubleshooting

### La traducciÃ³n no aparece

1. Verifica que la clave existe en ambos archivos (es.json y en.json)
2. AsegÃºrate de usar el namespace correcto
3. Revisa que no haya errores de sintaxis JSON
4. Reinicia el servidor de desarrollo

### TypeScript no sugiere las claves

1. Verifica que `i18n/types.ts` existe
2. Reinicia el servidor TypeScript en tu IDE
3. AsegÃºrate de que los archivos JSON no tienen errores

### El idioma no cambia

1. Verifica que las cookies estÃ¡n habilitadas
2. Revisa que la cookie `locale` se estÃ¡ estableciendo
3. AsegÃºrate de refrescar la pÃ¡gina despuÃ©s del cambio

## ğŸ“š Recursos

- [next-intl Documentation](https://next-intl-docs.vercel.app/)
- [ICU Message Format](https://formatjs.io/docs/core-concepts/icu-syntax/)
- [TypeScript Integration](https://next-intl-docs.vercel.app/docs/workflows/typescript)

## ğŸ¯ Estado Actual

### âœ… Completado

- âœ… Estructura completa de mensajes (ES/EN)
- âœ… Landing page traducida
- âœ… Metadata dinÃ¡mica traducida
- âœ… Header y Footer traducidos
- âœ… UserMenu traducido
- âœ… Type safety con TypeScript
- âœ… Funciones helper para traducciones dinÃ¡micas
- âœ… DocumentaciÃ³n completa

### ğŸš§ Pendiente

- â³ PÃ¡ginas de autenticaciÃ³n
- â³ Componentes del dashboard
- â³ PÃ¡ginas de gestiÃ³n de metas
- â³ PÃ¡ginas de comunidades
- â³ MigraciÃ³n completa de constantes a i18n

## ğŸ“Š Cobertura

- **Archivos de mensajes**: 430+ lÃ­neas cada uno
- **Namespaces**: 13 principales
- **Claves de traducciÃ³n**: 200+ por idioma
- **Componentes traducidos**: Landing page, Header, Footer, UserMenu
- **Type-safety**: âœ… Implementado
