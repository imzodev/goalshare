# Internacionalización (i18n) en GoalShare

## 📋 Descripción General

GoalShare utiliza `next-intl` para proporcionar soporte completo de internacionalización con español (ES) e inglés (EN). La implementación está basada en cookies, sin prefijos de URL, lo que permite una experiencia de usuario fluida.

## 🌍 Idiomas Soportados

- **Español (es)** - Idioma predeterminado
- **Inglés (en)**

## 📁 Estructura de Archivos

```
i18n/
├── config.ts              # Configuración de idiomas soportados
├── messages/
│   ├── es.json           # Traducciones en español (~430 líneas)
│   └── en.json           # Traducciones en inglés (~430 líneas)
├── request.ts            # Configuración de next-intl
└── types.ts              # Tipos TypeScript para type-safety

utils/
└── i18n-helpers.ts       # Funciones helper para traducciones dinámicas

app/
├── layout.tsx            # Configuración global de i18n
└── actions/
    └── set-locale.ts     # Server action para cambiar idioma
```

## 🎯 Namespaces Organizados

Las traducciones están organizadas en namespaces lógicos:

### `app`

Información general de la aplicación

- `name`, `title`, `description`, `skipToContent`

### `common`

Elementos reutilizables en toda la app

- `actions`: save, cancel, delete, edit, create, etc.
- `states`: loading, error, success, empty, etc.
- `time`: justNow, minutesAgo, hoursAgo, etc.

### `auth`

Sistema de autenticación completo

- `loginPage`: Formulario de inicio de sesión
- `signupPage`: Formulario de registro
- `forgotPassword`: Recuperación de contraseña
- `updatePassword`: Actualización de contraseña
- `oauth`: Botones de OAuth
- `errors`: Mensajes de error de autenticación

### `landing`

Página de aterrizaje

- `hero`: Sección hero
- `features`: Características del producto
- `testimonials`: Testimonios de usuarios
- `pricing`: Planes de precios
- `finalCta`: Call-to-action final
- `footer`: Footer del sitio

### `dashboard`

Dashboard principal

- `header`: Encabezado con saludos dinámicos
- `sidebar`: Navegación lateral
- `stats`: Tarjetas de estadísticas
- `quickActions`: Acciones rápidas
- `goalsSection`: Sección de metas
- `communitiesSection`: Sección de comunidades
- `mobileNav`: Navegación móvil

### `goals`

Gestión de metas

- `list`: Lista de metas
- `create`: Crear meta
- `edit`: Editar meta
- `delete`: Eliminar meta
- `types`: Tipos de meta (metric, milestone, checkin, manual)
- `typeDescriptions`: Descripciones de tipos
- `status`: Estados (pending, completed)
- `labels`: Etiquetas diversas

### `communities`

Gestión de comunidades

- `explore`: Explorar comunidades
- `profile`: Perfil de comunidad
- `myComm`: Mis comunidades
- `tabs`: Pestañas

### `achievements`

Sistema de logros

- `title`, `earned`, `locked`, `progress`, etc.

### `errors`

Mensajes de error globales

- `generic`, `notFound`, `unauthorized`, `serverError`, etc.

### `validation`

Mensajes de validación de formularios

- `required`, `minLength`, `maxLength`, `invalidEmail`, etc.

### `theme`

Selector de tema

- `toggle`, `light`, `dark`, `system`

### `language`

Selector de idioma

- `label`, `es`, `en`

### `userMenu`

Menú de usuario

- `profile`, `settings`, `logout`

## 💻 Uso en Componentes

### Server Components

```tsx
import { getTranslations } from "next-intl/server";

export default async function MyPage() {
  const t = await getTranslations("landing.hero");

  return (
    <div>
      <h1>{t("title")}</h1>
      <p>{t("subtitle")}</p>
    </div>
  );
}
```

### Client Components

```tsx
"use client";

import { useTranslations } from "next-intl";

export function MyComponent() {
  const t = useTranslations("dashboard.stats");

  return (
    <div>
      <h2>{t("activeGoals")}</h2>
      <p>{t("goalsDescription")}</p>
    </div>
  );
}
```

### Interpolación de Variables

```tsx
// En el archivo de traducciones:
// "multipleDays": "{count} días restantes"

const t = useTranslations("goals.labels");
const daysLeft = 5;

<p>{t("multipleDays", { count: daysLeft })}</p>;
// Resultado: "5 días restantes"
```

## 🔧 Funciones Helper

Para traducciones dinámicas de constantes, usa las funciones helper:

```tsx
import { getGoalTypeKey, getGoalStatusKey } from "@/utils/i18n-helpers";
import { useTranslations } from "next-intl";

function GoalCard({ goal }) {
  const t = useTranslations();

  // Traduce el tipo de meta dinámicamente
  const typeKey = getGoalTypeKey(goal.type);
  const typeLabel = t(typeKey);

  // Traduce el estado dinámicamente
  const statusKey = getGoalStatusKey(goal.status);
  const statusLabel = t(statusKey);

  return (
    <div>
      <p>Tipo: {typeLabel}</p>
      <p>Estado: {statusLabel}</p>
    </div>
  );
}
```

## 🌐 Cambiar Idioma

El usuario puede cambiar el idioma usando el componente `LanguageSwitcher` en el header. El idioma se guarda en una cookie que persiste por 1 año.

```tsx
import { LanguageSwitcher } from "@/components/language-switcher";

<LanguageSwitcher />;
```

Internamente, usa la server action `setLocaleCookie`:

```tsx
import { setLocaleCookie } from "@/app/actions/set-locale";

await setLocaleCookie("en"); // Cambia a inglés
await setLocaleCookie("es"); // Cambia a español
```

## 🔒 Type Safety

TypeScript proporciona autocompletado y validación de claves de traducción:

```tsx
// ✅ Correcto - TypeScript sugiere las claves disponibles
t("hero.title");

// ❌ Error - TypeScript detecta la clave inválida
t("hero.invalidKey");
```

Esto se logra mediante el archivo `i18n/types.ts` que extiende la interfaz `IntlMessages`.

## 📝 Agregar Nuevas Traducciones

1. **Agrega la clave en ambos archivos de idioma:**

```json
// i18n/messages/es.json
{
  "myNamespace": {
    "myKey": "Mi texto en español"
  }
}

// i18n/messages/en.json
{
  "myNamespace": {
    "myKey": "My text in English"
  }
}
```

2. **Usa la traducción en tu componente:**

```tsx
const t = useTranslations("myNamespace");
<p>{t("myKey")}</p>;
```

## 🌍 Agregar Nuevo Idioma

1. **Actualiza la configuración:**

```ts
// i18n/config.ts
export const SUPPORTED_LOCALES = ["es", "en", "fr"] as const; // Agrega "fr"
```

2. **Crea el archivo de mensajes:**

```bash
cp i18n/messages/en.json i18n/messages/fr.json
```

3. **Traduce el contenido del archivo `fr.json`**

4. **Actualiza las traducciones del selector de idioma:**

```json
// En es.json y en.json
{
  "language": {
    "label": "Idioma",
    "es": "Español",
    "en": "Inglés",
    "fr": "Francés" // Nuevo
  }
}
```

## ✅ Mejores Prácticas

1. **Usa namespaces descriptivos** - Agrupa traducciones relacionadas
2. **Mantén consistencia** - Usa los mismos términos en toda la app
3. **Evita hardcoded strings** - Todo texto visible debe estar traducido
4. **Usa interpolación** - Para textos con variables dinámicas
5. **Aprovecha type-safety** - TypeScript te ayudará a evitar errores
6. **Documenta contexto** - Si una traducción es ambigua, agrega comentarios

## 🐛 Troubleshooting

### La traducción no aparece

1. Verifica que la clave existe en ambos archivos (es.json y en.json)
2. Asegúrate de usar el namespace correcto
3. Revisa que no haya errores de sintaxis JSON
4. Reinicia el servidor de desarrollo

### TypeScript no sugiere las claves

1. Verifica que `i18n/types.ts` existe
2. Reinicia el servidor TypeScript en tu IDE
3. Asegúrate de que los archivos JSON no tienen errores

### El idioma no cambia

1. Verifica que las cookies están habilitadas
2. Revisa que la cookie `locale` se está estableciendo
3. Asegúrate de refrescar la página después del cambio

## 📚 Recursos

- [next-intl Documentation](https://next-intl-docs.vercel.app/)
- [ICU Message Format](https://formatjs.io/docs/core-concepts/icu-syntax/)
- [TypeScript Integration](https://next-intl-docs.vercel.app/docs/workflows/typescript)

## 🎯 Estado Actual

### ✅ Completado

- ✅ Estructura completa de mensajes (ES/EN)
- ✅ Landing page traducida
- ✅ Metadata dinámica traducida
- ✅ Header y Footer traducidos
- ✅ UserMenu traducido
- ✅ Type safety con TypeScript
- ✅ Funciones helper para traducciones dinámicas
- ✅ Documentación completa

### 🚧 Pendiente

- ⏳ Páginas de autenticación
- ⏳ Componentes del dashboard
- ⏳ Páginas de gestión de metas
- ⏳ Páginas de comunidades
- ⏳ Migración completa de constantes a i18n

## 📊 Cobertura

- **Archivos de mensajes**: 430+ líneas cada uno
- **Namespaces**: 13 principales
- **Claves de traducción**: 200+ por idioma
- **Componentes traducidos**: Landing page, Header, Footer, UserMenu
- **Type-safety**: ✅ Implementado
